{"name":"","code":"MainBackpack = \"Purple Backpack\"\nMiscBackpack = \"Blue Backpack\"\n\nCapToLeave = -1\nLeaveHours = 9.5\nEatFood = true\nUseUtitoTempo = true\n\n-- available: \"sword\", \"axe\" and \"club\"\nSkillTrain = \"sword\"\n\nUseRings = true\n\n-- name of the ring you want to use, by default: \"sword ring\"\nRing = \"sword ring\"\n\n-- how many times it should try to refill again before it goes trainers, default: 3\nRefillTries = 3\n\n-- DO NOT MODIFY\n\nfunction setLureCount(count)\n\tsetspecialareavalue(\"LureCount\", \"range x\",  tostring(count))\nend\n\nfunction getLureCount()\n\treturn getspecialareavalue(\"LureCount\", \"range x\")\nend\n\nfunction onlyTrapped()\n  for i=0, 1 do\n    settargetingvalue(i, \"only if trapped\", \"true\")\n  end\nend\n\nfunction notTrapped()\n  for i=0, 1 do\n    settargetingvalue(i, \"only if trapped\", \"false\")\n  end\nend\n\nfunction enableTargeting()\n  if not gettargeting() then\n    settargeting(\"on\")\n  end\nend\n\nfunction disableTargeting()\n  if gettargeting() then\n    settargeting(\"off\")\n  end\nend\n\nfunction triggerTargeting(count)\n  if getmainbattlelistmonsters().Count  >= count then\n    notTrapped()\n    enableTargeting()\n  end\nend\n\nfunction resetRefillTries()\n  log(\"Refill Tries set to 0\")\n\tsetspecialareavalue(\"RefillTries\", \"posx\",  tostring(0))\nend\n\nfunction inrcrementRefillTries()\n  log(\"Incremented Refill Tries by 1\")\n\tsetspecialareavalue(\"RefillTries\", \"posx\",  tostring((tonumber(getRefillTries()) + 1)))\n  log(getRefillTries() .. \"x refill try.\")\nend\n\nfunction getRefillTries()\n\treturn getspecialareavalue(\"RefillTries\", \"posx\")\nend\n\n-- DO NOT MODIFY\n\nfunction wait_lure(amountToLure, distance, waitTime, minimumMonsters)\n  local counter = waitTime\n  distance = distance + 1\n\n  while counter > 0 do\n    if creaturesaround(distance) >= amountToLure then\n      break\n    end\n\n    if creaturesaround(6) < minimumMonsters then\n      break\n    end\n\n    wait(200,200)\n    counter = counter - 200\n  end\n\nend\n\nfunction checkTime(leave_hour)\n  local minutes = math.floor((math.fmod(leave_hour, 1) * 60) + 0.5)\n  local hours = math.floor(leave_hour)\n\n  local now = os.date('*t')\n  local new = os.time{year = now.year, month = now.month, day = now.day, hour = hours, min = minutes }\n\n  local leave_date = os.date('*t', new)\n\n  if leave_date.hour == now.hour then\n  \tif leave_date.min < now.min then\n\t\tlog(\"Check Time is true!\")\n  \t\treturn true\n  \tend\n  end\n\n  return false\nend\n\nfunction checkSupplies()\n\tlocal supplies = { \"strong mana potion\", \"great health potion\", \"ultimate health potion\" }\n\n\tif CapToLeave >= cap() then\n\t\tlog(\"Low cap, checkSupplies is true!\")\n\t\treturn false\n\tend\n\n\tif HoursLeave and checkTime(HoursLeave) == true then\n\t\tlog(\"Hours Leave, checkSupplies is true!\")\n\t\treturn false\n\tend\n\n\t-- if checkHours() then\n\t-- \tlog(\"Hunting Hours, checkSuppliesis true!\")\n\t-- \treturn false\n\t-- end\n\n\tfor i=1, #supplies do\n\t\tif tonumber(getsupplyitemvalue(i-1, \"minimum up to\")) > (countsupply(supplies[i]) + 5) then\n\t\t\tlog(\"Missing \" .. supplies[i] .. \", checkSupplies  is true!\")\n\t\t\treturn false\n\t\tend\n\tend\n\n\treturn true\nend\n\nfunction needResupply(leave_cap)\n\tlocal supplies = { \"strong mana potion\", \"great health potion\", \"ultimate health potion\" }\n\n\tif leave_cap >= cap() then\n\t\tlog(\"Low cap, needResupply is true!\")\n\t\treturn true\n\tend\n\n\tif HoursLeave and checkTime(HoursLeave) == true then\n\t\tlog(\"Hours Leave, needResupply is true!\")\n\t\treturn true\n\tend\n\n\tfor i=1, #supplies do\n\t\tif math.random(tonumber(getsupplyitemvalue(i-1, \"minimum down to\")), tonumber(getsupplyitemvalue(i-1, \"maximum down to\"))) > (countsupply(supplies[i])) then\n\t\t\tlog(\"Missing \" .. supplies[i] .. \", needResupply is true!\")\n\t\t\treturn true\n\t\tend\n\tend\n\n\treturn false\nend\n\nfunction GetFromDepot(destinybpname,depotwindowname,itemname)\n  local redbp = getcontainer(destinybpname).Location\n  local itempos = point(0,0)\n  local self_backpack = point(redbp.X + 30, redbp.Y + 30)\n  if (finditem(itemname,getcontainer(depotwindowname))) then\n    itempos = getitem(itemname,getcontainer(depotwindowname))\n    ldrag(itempos,self_backpack)\n  end\nend\n\nfunction OpenDepotBox(box_index)\n\n  if getcontainer(\"Locker\").X == 0 and getcontainer(\"Depot Chest\").X == 0 then\n      opendepot()\n      wait(500,1000)\n  end\n\n\tif getcontainer(\"Locker\").X ~= 0 and getcontainer(\"Depot Chest\").X == 0 then\n\t\tlocal lockerSlots = getslots(getcontainer(\"Locker\"))\n\t\tlocal screenpos = point(lockerSlots[0].X + rect.X +5, lockerSlots[0].Y + rect.Y+5)\n\t\trclick(screenpos)\n\t\twait(1500,1900)\n\tend\n\n\tlocal depotChest = getcontainer(\"Depot Chest\")\n\tlocal slots = getslots(depotChest)\n\tif depotChest.X ~= 0 and slots.Count >= box_index then\n\t\tscreenpos = point(slots[box_index].X + depotChest.X +5, slots[box_index].Y + depotChest.Y+5)\n\t\trclick(screenpos)\n\t\twait(1500,1900)\n\tend\n\nend\n\nfunction setPosition(x,y,z)\n\tsetspecialareavalue(\"PosX\", \"range x\",  tostring(x))\n\tsetspecialareavalue(\"PosY\", \"range x\",  tostring(y))\n\tsetspecialareavalue(\"PosZ\", \"range x\",  tostring(z))\nend\n\nfunction getPosition()\n\treturn {\n\t\tx = getspecialareavalue(\"PosX\", \"range x\"),\n\t\ty = getspecialareavalue(\"PosY\", \"range x\"),\n\t\tz = getspecialareavalue(\"PosZ\", \"range x\")\n\t}\nend\n\nfunction insideArea(fromX, toX, fromY, toY)\n\tif posx() >= fromX and posx() <= toX then\n\t if posy() >= fromY and posy() <= toY then\n\t\t \treturn true\n\t\tend\n\tend\n\treturn false\nend\n\nfunction withdrawFromStash(supplyName, index)\n\n  local itemCount = countsupply(supplyName)\n  local minimumToWithdraw = tonumber(getsupplyitemvalue(index, \"minimum up to\"))\n  local maximumToWithdraw = tonumber(getsupplyitemvalue(index, \"maximum up to\"))\n  local randomWithdraw = math.random(minimumToWithdraw, maximumToWithdraw)\n  local quantityToWithdraw = randomWithdraw - itemCount \n\n  if itemCount < randomWithdraw and quantityToWithdraw > 0 then\n  \tif getcontainer(\"Locker\").X == 0 then\n  \t\topendepot()\n  \tend\n  \twait(500,1000)\n  \topenstash()\n  \twait(500,1000)\n  \tgetstashitem(supplyName, quantityToWithdraw)\n  \twait(400,800)\n  \tclosestash()\n  \twait(200,400)\n  end\n  \nend"}
